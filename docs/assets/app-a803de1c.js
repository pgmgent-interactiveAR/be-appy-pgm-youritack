import{S as T,H as F,G as B,W as C,P,c as D,A as W,a as j,b as L,C as H}from"./vendor-00e9067a.js";(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))d(e);new MutationObserver(e=>{for(const n of e)if(n.type==="childList")for(const p of n.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&d(p)}).observe(document,{childList:!0,subtree:!0});function y(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerpolicy&&(n.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?n.credentials="include":e.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function d(e){if(e.ep)return;e.ep=!0;const n=y(e);fetch(e.href,n)}})();const N=()=>{const i=document.querySelector("#mainmenu"),l=document.querySelector("#dancingTeacherMenu"),y=document.querySelector("#dancingTeacherMenuButton"),d=document.querySelector("#petMenuButton"),e=document.querySelector("#petMenu"),n=document.querySelector(".dropbtn"),p=document.querySelector(".dropup-content"),g=document.querySelector(".dropbtnTeacher"),o=document.querySelector(".dropup-contentTeacher");let c=!1;d.addEventListener("click",()=>{i.style.opacity=0,setTimeout(()=>{i.classList.add("hidden"),e.classList.remove("hidden")},610)}),y.addEventListener("click",()=>{i.style.opacity=0,setTimeout(()=>{i.classList.add("hidden"),l.classList.remove("hidden")},610)}),n.addEventListener("click",()=>{c?(p.classList.add("hidden"),c=!1):(p.classList.remove("hidden"),c=!0)}),g.addEventListener("click",()=>{c?(o.classList.add("hidden"),c=!1):(o.classList.remove("hidden"),c=!0)})},X=""+new URL("capybara2-f07549e4.glb",import.meta.url).href,$=new H;let E=[];const O=()=>{const i=()=>{console.log(navigator.xr),navigator.xr?document.querySelector("#petMenuButton").addEventListener("click",y):alert("not comp")};let l=0;const y=async()=>{const d=document.createElement("canvas");document.body.appendChild(d);const e=d.getContext("webgl2",{xrCompatible:!0}),n=new T,p=new F(16777147,526368,1);n.add(p);const g=new B;let o;g.load("https://immersive-web.github.io/webxr-samples/media/gltf/reticle/reticle.gltf",function(a){o=a.scene,o.visible=!1,n.add(o)});let c=null,u;g.load(X,function(a){u=a.scene,c=a.animations.filter(t=>t.name.length<10),console.log(c),u.scale.set(.05,.05,.05),u.rotateY(-90),u.visible=!0});const b=new C({alpha:!0,preserveDrawingBuffer:!0,canvas:d,context:e});b.autoClear=!1;const f=new P;f.matrixAutoUpdate=!1;const r=await navigator.xr.requestSession("immersive-ar",{optionalFeatures:["dom-overlay"],requiredFeatures:["hit-test"],domOverlay:{root:document.getElementById("petmenuDOM")}});r.updateRenderState({baseLayer:new XRWebGLLayer(r,e)}),document.querySelectorAll(".playanimation").forEach(a=>a.addEventListener("click",t=>{x(t.target.value)})),document.querySelector("#addAnimal").addEventListener("click",a=>{if(O){const t=D(u);t.position.copy(o.position);const m=new W(t);let s=new j(t);s.visible=!1;const h=L.findByName(c,"idle"),v=m.clipAction(h);E.push(m),v.play(),n.add(t),n.add(s)}});const x=a=>{E.forEach((t,m)=>{t.stopAllAction(),console.log(t.getRoot());const s=L.findByName(c,a);t.clipAction(s).play()})},S=await r.requestReferenceSpace("local"),A=await r.requestReferenceSpace("viewer"),M=await r.requestHitTestSource({space:A}),q=(a,t)=>{r.requestAnimationFrame(q),l=$.getDelta(),E.forEach((s,h)=>{s.update(l)}),e.bindFramebuffer(e.FRAMEBUFFER,r.renderState.baseLayer.framebuffer);const m=t.getViewerPose(S);if(m){const s=m.views[0],h=r.renderState.baseLayer.getViewport(s);b.setSize(h.width,h.height),f.matrix.fromArray(s.transform.matrix),f.projectionMatrix.fromArray(s.projectionMatrix),f.updateMatrixWorld(!0);const v=t.getHitTestResults(M);if(v.length>0&&o){const w=v[0].getPose(S);o.visible=!0,o.position.set(w.transform.position.x,w.transform.position.y,w.transform.position.z),o.updateMatrixWorld(!0)}b.render(n,f)}};r.requestAnimationFrame(q),document.querySelector("#closeAnimal").addEventListener("click",()=>{document.querySelector("#petMenu").classList.add("hidden"),document.querySelector("#mainmenu").classList.remove("hidden"),document.querySelector("#mainmenu").style.opacity=1,r.end()})};i()},G=""+new URL("Helena-lowres-animations-ac207240.glb",import.meta.url).href,z=new H;let k=[];const I=()=>{const i=()=>{console.log(navigator.xr),navigator.xr?document.querySelector("#dancingTeacherMenuButton").addEventListener("click",y):alert("not comp")};let l=0;const y=async()=>{const d=document.createElement("canvas");document.body.appendChild(d);const e=d.getContext("webgl2",{xrCompatible:!0}),n=new T,p=new F(16777147,526368,1);n.add(p);const g=new B;let o;g.load("https://immersive-web.github.io/webxr-samples/media/gltf/reticle/reticle.gltf",function(a){o=a.scene,o.visible=!1,n.add(o)});let c=null,u;g.load(G,function(a){u=a.scene,c=a.animations,console.log(c),u.scale.set(.001,.001,.001),u.rotateY(-90),u.visible=!0});const b=new C({alpha:!0,preserveDrawingBuffer:!0,canvas:d,context:e});b.autoClear=!1;const f=new P;f.matrixAutoUpdate=!1;const r=await navigator.xr.requestSession("immersive-ar",{optionalFeatures:["dom-overlay"],requiredFeatures:["hit-test"],domOverlay:{root:document.getElementById("teachermenuDom")}});r.updateRenderState({baseLayer:new XRWebGLLayer(r,e)});const R=document.querySelector("#addTeacher");document.querySelectorAll(".playanimation").forEach(a=>a.addEventListener("click",t=>{x(t.target.value)})),R.addEventListener("click",a=>{if(u){const t=D(u);t.position.copy(o.position);const m=new W(t);let s=new j(t);s.visible=!1;const h=L.findByName(c,"idle"),v=m.clipAction(h);k.push(m),v.play(),n.add(t),n.add(s)}});const x=a=>{k.forEach((t,m)=>{t.stopAllAction(),console.log(t.getRoot());const s=L.findByName(c,a);t.clipAction(s).play()})},S=await r.requestReferenceSpace("local"),A=await r.requestReferenceSpace("viewer"),M=await r.requestHitTestSource({space:A}),q=(a,t)=>{r.requestAnimationFrame(q),l=z.getDelta(),k.forEach((s,h)=>{s.update(l)}),e.bindFramebuffer(e.FRAMEBUFFER,r.renderState.baseLayer.framebuffer);const m=t.getViewerPose(S);if(m){const s=m.views[0],h=r.renderState.baseLayer.getViewport(s);b.setSize(h.width,h.height),f.matrix.fromArray(s.transform.matrix),f.projectionMatrix.fromArray(s.projectionMatrix),f.updateMatrixWorld(!0);const v=t.getHitTestResults(M);if(v.length>0&&o){const w=v[0].getPose(S);o.visible=!0,o.position.set(w.transform.position.x,w.transform.position.y,w.transform.position.z),o.updateMatrixWorld(!0)}b.render(n,f)}};r.requestAnimationFrame(q),document.querySelector("#closeTeacher").addEventListener("click",()=>{document.querySelector("#dancingTeacherMenu").classList.add("hidden"),document.querySelector("#mainmenu").classList.remove("hidden"),document.querySelector("#mainmenu").style.opacity=1,r.end()})};i()},V=()=>{const i=["mountain.jpg","space.jpg","tree.jpg","waterfall.jpg"],l=["It’s not a bug; it’s an undocumented feature","Code is like humor. When you have to explain it, it’s bad","Software is like sex: it’s better when it’s free","Software and cathedrals are much the same — first we build them, then we pray"],y=i[Math.floor(Math.random()*i.length)],d=l[Math.floor(Math.random()*l.length)],e=document.querySelector("#my-image"),n=document.querySelector("#quote"),p=document.querySelector("#refresh");e.src=`../assets/backgrounds/${y}`,n.setAttribute("value",d),p.addEventListener("click",()=>{const g=i[Math.floor(Math.random()*i.length)],o=l[Math.floor(Math.random()*l.length)],c=document.querySelector("#my-image"),u=document.querySelector("#quote");console.log(c),c.src=`./public/backgrounds/${g}`,u.setAttribute("value",o)})},Y=()=>{try{N()}catch{}try{O()}catch{}try{I()}catch{}try{V()}catch{}};document.addEventListener("DOMContentLoaded",Y);
